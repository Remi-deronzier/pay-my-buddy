<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <title>Pay My buddy - Sign up</title>
	    
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- Bootstrap JS -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
	</head>
	
	<body>
		<div class="container my-5">
			<div class="d-flex justify-content-center align-items-center">
				<div th:if="${hasCustomErrors}" class="alert alert-danger dismissible fade show w-50" role="alert">
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-lbel="Close"></button>
					<strong>Error!</strong> Registration failed
				</div>
			</div>
			<div class="d-flex justify-content-center align-items-center">
				<div class="card w-75 text-center">
					<div class="card-body">
						<div class="d-flex justify-content-center">
							<h5 class="card-title bg-success rounded p-3 text-light mb-4">Pay My Buddy</h5>
						</div>
						
						<form id="signupForm" action="#" th:action="@{/user/signup}" th:object="${newUser}"  th:method="post">
							<div class="row mb-3">
								<label for="email" class="col-sm-2 col-form-label">Email*</label>
								<div class="col-sm-10">
		  							<div class="input-group">
										<div class="input-group-text">@</div>
										<input type="email" class="form-control" name="email" id="email" placeholder="name@example.com" th:field="*{email}">
									</div>
								</div>
								<span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger text-end">Email Error</span>
							</div>
							<div class="row mb-3">
								<label for="userName" class="col-sm-2 col-form-label">Username*</label>
							    <div class="col-sm-10">
									<input type="text" class="form-control" name="userName" id="userName" placeholder="johnDoe" th:field="*{userName}">
							    </div>
								<span th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}" class="text-danger text-end">User name Error</span>
  							</div>
  							<div class="row mb-3">
								<label for="firstName" class="col-sm-2 col-form-label">First name*</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="firstName" id="firstName" placeholder="John" th:field="*{firstName}">
								</div>
								<span th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}" class="text-danger text-end">First name Error</span>
  							</div>
  							<div class="row mb-3">
								<label for="lastName" class="col-sm-2 col-form-label">Last name*</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="lastName" id="lastName" placeholder="Doe" th:field="*{lastName}">
								</div>
								<span th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}" class="text-danger text-end">Last name Error</span>
  							</div>
  							<div class="row mb-3">
								<label for="dateOfBirth" class="col-sm-2 col-form-label">Date of birth</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="dateOfBirth" id="dateOfBirth" placeholder="1997-02-11" th:field="*{dateOfBirth}">
								</div>
								<span th:if="${#fields.hasErrors('dateOfBirth')}" class="text-danger text-end">Date of birth is not a valid format (yyyy-MM-dd) or you are not over 18</span>
  							</div>
  							<div class="row mb-3">
								<label for="phoneNumber" class="col-sm-2 col-form-label">Tel</label>
								<div class="col-sm-10">
									<input type="tel" class="form-control" name="phoneNumber" id="phoneNumber" placeholder="06 66 66 66 66" th:field="*{phoneNumber}">
								</div>
								<span th:if="${#fields.hasErrors('phoneNumber')}" class="text-danger text-end">Phone number is not a French valid number</span>
  							</div>
  							<div class="row mb-3">
								<label for="description" class="col-sm-2 col-form-label">Description</label>
								<div class="col-sm-10">
									<textarea class="form-control" rows="3" name="description" id="description" th:field="*{description}"></textarea>
								</div>
  							</div>
  							<div class="row mb-3">
								<label for="password" class="col-sm-2 col-form-label">Password*</label>
								<div class="col-sm-10">
									<input type="password" class="form-control" name="password" id="password" placeholder="*****" th:field="*{password}">
								</div>
								<span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="text-danger text-end">Password Error</span>
  							</div>
  							<div class="row">
								<label for="passwordConfirmation" class="col-sm-2 col-form-label">Password confirmation*</label>
								<div class="col-sm-10">
									<input type="password" class="form-control" name="passwordConfirmation" id="passwordConfirmation" placeholder="*****">
								</div>
								<span th:if="${#fields.hasErrors('passwordConfirmation')}" th:errors="*{passwordConfirmation}" class="text-danger text-end">Password confirmation Error</span>
								<span th:if="${#fields.hasErrors('global')}" th:errors="*{global}" class="text-danger text-end">Incorrect password confirmation</span>
  							</div>
							<button type="submit" class="btn btn-primary mb-3">Sign up</button>
							<div>
						        <a th:href="@{/login}" class="card-link">Log in</a>
					        </div>
						</form>
						
				  	</div>
				</div>
			</div>
		
		</div>
	</body>
</html>